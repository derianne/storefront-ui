{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport cookie from \"cookie\";\nexport function parseCookies() {\n  var ctx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (ctx.req && ctx.req.headers.cookie) {\n    return cookie.parse(ctx.req.headers.cookie, options);\n  }\n\n  if (process.browser) {\n    return cookie.parse(document.cookie, options);\n  }\n\n  return {};\n}\nexport function setCookie() {\n  var ctx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var name = arguments.length > 1 ? arguments[1] : undefined;\n  var value = arguments.length > 2 ? arguments[2] : undefined;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (ctx && ctx.res) {\n    var cookies = ctx.res.getHeader(\"Set-Cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(cookie.serialize(name, value, options));\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(name, value, options);\n  }\n\n  return {};\n}\nexport function destroyCookie() {\n  var ctx = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var name = arguments.length > 1 ? arguments[1] : undefined;\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (ctx && ctx.res) {\n    var cookies = ctx.res.getHeader(\"set-cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(cookie.serialize(name, \"\", _Object$assign({}, options, {\n      maxAge: -1\n    })));\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(name, \"\", _Object$assign({}, options, {\n      maxAge: -1\n    }));\n  }\n\n  return {};\n}\nexport default {\n  set: function set(ctx, name, value) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    setCookie(ctx, name, value, options);\n  },\n  get: function get(ctx, options) {\n    return parseCookies(ctx, options);\n  },\n  destroy: function destroy(ctx, name) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return destroyCookie(ctx, name, options);\n  }\n};","map":{"version":3,"sources":["/Users/andrzej/Projects/storefront-ui/demo/helpers/cookie.js"],"names":["cookie","parseCookies","ctx","options","req","headers","parse","process","browser","document","setCookie","name","value","res","cookies","getHeader","push","serialize","setHeader","destroyCookie","maxAge","set","get","destroy"],"mappings":"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","sourcesContent":["import cookie from \"cookie\";\n\nexport function parseCookies(ctx = {}, options = {}) {\n  if (ctx.req && ctx.req.headers.cookie) {\n    return cookie.parse(ctx.req.headers.cookie, options);\n  }\n\n  if (process.browser) {\n    return cookie.parse(document.cookie, options);\n  }\n\n  return {};\n}\n\nexport function setCookie(ctx = {}, name, value, options = {}) {\n  if (ctx && ctx.res) {\n    let cookies = ctx.res.getHeader(\"Set-Cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(cookie.serialize(name, value, options));\n\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(name, value, options);\n  }\n\n  return {};\n}\n\nexport function destroyCookie(ctx = {}, name, options = {}) {\n  if (ctx && ctx.res) {\n    let cookies = ctx.res.getHeader(\"set-cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(\n      cookie.serialize(name, \"\", Object.assign({}, options, { maxAge: -1 }))\n    );\n\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(\n      name,\n      \"\",\n      Object.assign({}, options, { maxAge: -1 })\n    );\n  }\n\n  return {};\n}\nexport default {\n  set: (ctx, name, value, options = {}) => {\n    setCookie(ctx, name, value, options);\n  },\n  get: (ctx, options) => parseCookies(ctx, options),\n  destroy: (ctx, name, options = {}) => destroyCookie(ctx, name, options)\n};\n"]},"metadata":{},"sourceType":"module"}