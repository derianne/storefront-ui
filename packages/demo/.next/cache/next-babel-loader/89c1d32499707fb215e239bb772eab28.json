{"ast":null,"code":"import _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport cookie from \"cookie\";\nexport function parseCookies(ctx = {}, options = {}) {\n  if (ctx.req && ctx.req.headers.cookie) {\n    return cookie.parse(ctx.req.headers.cookie, options);\n  }\n\n  if (process.browser) {\n    return cookie.parse(document.cookie, options);\n  }\n\n  return {};\n}\nexport function setCookie(ctx = {}, name, value, options = {}) {\n  if (ctx && ctx.res) {\n    let cookies = ctx.res.getHeader(\"Set-Cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(cookie.serialize(name, value, options));\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(name, value, options);\n  }\n\n  return {};\n}\nexport function destroyCookie(ctx = {}, name, options = {}) {\n  if (ctx && ctx.res) {\n    let cookies = ctx.res.getHeader(\"set-cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(cookie.serialize(name, \"\", _Object$assign({}, options, {\n      maxAge: -1\n    })));\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(name, \"\", _Object$assign({}, options, {\n      maxAge: -1\n    }));\n  }\n\n  return {};\n}\nexport default {\n  set: (ctx, name, value, options = {}) => {\n    setCookie(ctx, name, value, options);\n  },\n  get: (ctx, options) => parseCookies(ctx, options),\n  destroy: (ctx, name, options = {}) => destroyCookie(ctx, name, options)\n};","map":{"version":3,"sources":["/Users/andrzej/Projects/storefront-ui/demo/helpers/cookie.js"],"names":["cookie","parseCookies","ctx","options","req","headers","parse","process","browser","document","setCookie","name","value","res","cookies","getHeader","push","serialize","setHeader","destroyCookie","maxAge","set","get","destroy"],"mappings":"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","sourcesContent":["import cookie from \"cookie\";\n\nexport function parseCookies(ctx = {}, options = {}) {\n  if (ctx.req && ctx.req.headers.cookie) {\n    return cookie.parse(ctx.req.headers.cookie, options);\n  }\n\n  if (process.browser) {\n    return cookie.parse(document.cookie, options);\n  }\n\n  return {};\n}\n\nexport function setCookie(ctx = {}, name, value, options = {}) {\n  if (ctx && ctx.res) {\n    let cookies = ctx.res.getHeader(\"Set-Cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(cookie.serialize(name, value, options));\n\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(name, value, options);\n  }\n\n  return {};\n}\n\nexport function destroyCookie(ctx = {}, name, options = {}) {\n  if (ctx && ctx.res) {\n    let cookies = ctx.res.getHeader(\"set-cookie\") || [];\n\n    if (typeof cookies === \"string\") {\n      cookies = [cookies];\n    }\n\n    cookies.push(\n      cookie.serialize(name, \"\", Object.assign({}, options, { maxAge: -1 }))\n    );\n\n    ctx.res.setHeader(\"Set-Cookie\", cookies);\n  }\n\n  if (process.browser) {\n    document.cookie = cookie.serialize(\n      name,\n      \"\",\n      Object.assign({}, options, { maxAge: -1 })\n    );\n  }\n\n  return {};\n}\nexport default {\n  set: (ctx, name, value, options = {}) => {\n    setCookie(ctx, name, value, options);\n  },\n  get: (ctx, options) => parseCookies(ctx, options),\n  destroy: (ctx, name, options = {}) => destroyCookie(ctx, name, options)\n};\n"]},"metadata":{},"sourceType":"module"}